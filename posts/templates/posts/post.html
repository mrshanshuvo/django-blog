{% extends "base.html" %}
{% block title %}
  ABlog - {{ post.post_title }}
{% endblock title %}
{% block main %}
  <div class="container my-4">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <!-- Hero image -->
        <img src="{{ post.post_image.url }}"
             alt="Post image"
             width="800"
             height="400"
             class="img-fluid rounded bg-light mb-3" />
        <!-- Date -->
        <div class="text-center text-muted small mb-2">{{ post.published_data|date:"j F Y" }}</div>
        <!-- Title -->
        <h1 class="text-center fw-bold mb-3">{{ post.post_title }}</h1>
        <hr class="mb-4">
        <!-- Tags -->
        {% if post.tags.all %}
          <div class="text-center mb-4">
            {% for tag in post.tags.all %}
              <a href="{% url 'tags' tag.id %}"
                 class="badge rounded-pill bg-secondary text-decoration-none me-1">#{{ tag.name }}</a>
            {% endfor %}
          </div>
        {% endif %}
        <!-- Body -->
        <p class="fs-6 lh-lg text-body mb-5">{{ post.post_content }}</p>
        <!-- COMMENTS -->
        <section class="mb-5">
          <h2 class="h4 fw-semibold mb-3">Comments</h2>
          {% if user.is_authenticated %}
            <!-- Comment form -->
            <form method="post" class="mb-4">
              {% csrf_token %}
              <div class="mb-3">{{ form }}</div>
              <button type="submit" class="btn btn-primary btn-sm">Comment</button>
            </form>
          {% else %}
            <span class="badge bg-danger mb-4 d-inline-block">Login to comment</span>
          {% endif %}
          <!-- Comments list -->
          {% for comment in comments %}
            <div class="card mb-3">
              <div class="card-body">
                <div class="row g-3 align-items-start">
                  <div class="col-auto">
                    <img src="https://static.vecteezy.com/system/resources/previews/000/550/980/non_2x/user-icon-vector.jpg"
                         alt="User avatar"
                         class="rounded-circle border"
                         width="64"
                         height="64" />
                  </div>
                  <div class="col">
                    <h6 class="fw-semibold mb-1">{{ comment.user.username }}</h6>
                    <p class="mb-1 text-body">{{ comment.comment }}</p>
                    <small class="text-muted">{{ comment.created_at|date:"j M Y H:i" }}</small>
                  </div>
                </div>
              </div>
            </div>
          {% empty %}
            <p class="text-muted small">No comments yet.</p>
          {% endfor %}
        </section>
      </div>
      <!-- col-lg-10 -->
    </div>
    <!-- row -->
  </div>
  <!-- container -->
{% endblock main %}
